/******************************************************************************
   クラリオン殿向け
   プロジェクト名   :    2012年AM/FMラジオ対応モデル開発
   ファイル名      :    aud_ext.c
   モジュール名   :    Audioモジュール
   機能概略      :    外部モジュール向けインターフェース関数定義
-------------------------------------------------------------------------------
修正履歴
   番号      日付      担当者      関数名         修正内容
   【000】      12/07/13   leejh                  新規作成
    【001】      12/09/25   leejh      Aud_get_power_status(追加)
                              Aud_test_func(追加)
                              Aud_secret_loud_key(追加)
********************************************************************************/
#define _AUD_EXT_C_

#include   "../model.h"

#include   "../comm/common.h"
#include   "../io/IO_inc.h"
#include   "../main/MA_inc.h"
#include   "../submode/SBM_inc.h"

#include   "aud_def.h"
#include   "aud_main.h"
#include    "aud_sys.h"
#include   "aud_ext.h"
#include   "aud_beep_func.h"
#include   "aud_mute_func.h"

/******************************************************************************
   関数名      ：   Aud_set_vol_step
   引数      ：   BYTE direction   : STEP UP/DOWN
   戻り値      ：   なし
   機能概略   ：   VOLUMEステップを1ステップづつ増減させる関数
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/03/21   ISHIHARA   新規作成
******************************************************************************/
void Aud_set_vol_step (BYTE direction)
{
   /* UPまたはDOWN方向指定のみ。それ以外の要求は受け付けない */
   if ((direction == CAUD_STP_UP) || (direction == CAUD_STP_DOWN))
   {
      Aud_edit_volume( direction );
   }
}

/******************************************************************************
   関数名      ：   Aud_set_bas_step
   引数      ：   BYTE direction   : STEP UP/DOWN
   戻り値      ：   なし
   機能概略   ：   BASSステップを1ステップづつ増減させる関数
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/03/21   ISHIHARA   新規作成
******************************************************************************/
void Aud_set_bas_step(BYTE direction)
{
   /* UPまたはDOWN方向指定のみ。それ以外の要求は受け付けない */
   if ((direction == CAUD_STP_UP) || (direction == CAUD_STP_DOWN))
   {
      Aud_edit_bass( direction );
   }
}

/******************************************************************************
   関数名      ：   Aud_set_tre_step
   引数      ：   BYTE direction   : STEP UP/DOWN
   戻り値      ：   なし
   機能概略   ：   TREBLEステップを1ステップづつ増減させる関数
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/03/21   ISHIHARA   新規作成
******************************************************************************/
void Aud_set_tre_step(BYTE direction)
{
   /* UPまたはDOWN方向指定のみ。それ以外の要求は受け付けない */
   if ((direction == CAUD_STP_UP) || (direction == CAUD_STP_DOWN))
   {
      Aud_edit_treble( direction );
   }
}

/******************************************************************************
   関数名      ：   Aud_set_bal_step
   引数      ：   BYTE direction   : STEP UP/DOWN
   戻り値      ：   なし
   機能概略   ：   BALANCEステップを１づつ増減させる関数
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/03/21   ISHIHARA   新規作成
******************************************************************************/
void Aud_set_bal_step(BYTE direction)
{
   /* UPまたはDOWN方向指定のみ。それ以外の要求は受け付けない */
   if ((direction == CAUD_STP_UP) || (direction == CAUD_STP_DOWN))
   {
      Aud_edit_balance( direction );

   }
}

/******************************************************************************
   関数名      ：   Aud_set_fad_step
   引数      ：   BYTE direction   : STEP UP/DOWN
   戻り値      ：   なし
   機能概略   ：   FADERステップを１づつ増減させる関数
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/03/21   ISHIHARA   新規作成
******************************************************************************/
void Aud_set_fad_step(BYTE direction)
{
   /* UPまたはDOWN方向指定のみ。それ以外の要求は受け付けない */
   if ((direction == CAUD_STP_UP) || (direction == CAUD_STP_DOWN))
   {
      Aud_edit_fader( direction );
   }
}

/******************************************************************************
   関数名      ：   Aud_get_vol_step
   引数      ：   BYTE val_type   : 通知するデータ形式
            ：                  CAUD_HEX ⇒ HEX形式
            ：                  CAUD_BCD ⇒ BCD形式
   戻り値      ：   BYTE step      : volume step値
   機能概略   ：   volume stepを通知する関数。
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/03/21   ISHIHARA   新規作成
******************************************************************************/
BYTE Aud_get_vol_step(void)
{
   /* step値を取得 */
   return( Aud_get_audio_info( CAUD_ADJ_VOL));   // Aud_get_audio_info() trong file aud_main.c
}

/******************************************************************************
   関数名      ：   Aud_get_bas_step
   引数      ：   BYTE val_type   : 通知するデータ形式
            ：                  CAUD_HEX ⇒ HEX形式
            ：                  CAUD_BCD ⇒ BCD形式
   戻り値      ：   BYTE step      : bass step値
   機能概略   ：   bass stepを通知する関数。
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/03/21   ISHIHARA   新規作成
******************************************************************************/
BYTE Aud_get_bas_step(void)
{
   /* step値を取得 */
   return( Aud_get_audio_info( CAUD_ADJ_BAS));
}

/******************************************************************************
   関数名      ：   Aud_get_tre_step
   引数      ：   BYTE val_type   : 通知するデータ形式
            ：                  CAUD_HEX ⇒ HEX形式
            ：                  CAUD_BCD ⇒ BCD形式
   戻り値      ：   BYTE step      : treble step値
   機能概略   ：   treble stepを通知する関数。
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/03/21   ISHIHARA   新規作成
******************************************************************************/
BYTE Aud_get_tre_step(void)
{
   /* step値を取得 */
   return( Aud_get_audio_info(CAUD_ADJ_TRE));
}

/******************************************************************************
   関数名      ：   Aud_get_bal_step
   引数      ：   BYTE val_typee   : 通知するデータ形式
            ：                  CAUD_HEX ⇒ HEX形式
            ：                  CAUD_BCD ⇒ BCD形式
   戻り値      ：   BYTE step      : balance step値
   機能概略   ：   balance stepを通知する関数。
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/03/21   ISHIHARA   新規作成
******************************************************************************/
BYTE Aud_get_bal_step(void)
{
   /* step値を取得 */
   return( Aud_get_audio_info(CAUD_ADJ_BAL));
}

/******************************************************************************
   関数名      ：   Aud_get_fad_step
   引数      ：   BYTE val_type   : 通知するデータ形式
            ：                  CAUD_HEX ⇒ HEX形式
            ：                  CAUD_BCD ⇒ BCD形式
   戻り値      ：   BYTE step      : fader step値
   機能概略   ：   fader stepを通知する関数。
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/03/21   ISHIHARA   新規作成
******************************************************************************/
BYTE Aud_get_fad_step(void)
{
   /* step値を取得 */
   return( Aud_get_audio_info(CAUD_ADJ_FAD));
}

/******************************************************************************
   関数名      ：   Aud_set_prg_mute
   引数      ：   BYTE ModuleID   : MUTE種別
            ：   BYTE on_off      : ON/OFF要求
   戻り値      ：   無し
   機能概略   ：   モージュールからMUTE ON/OFFを要求する関数。
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/03/21   ISHIHARA   新規作成
******************************************************************************/
void Aud_set_prg_mute(BYTE ModuleID, BYTE on_off)
{
   /* ONまたはOFF指定のみ。それ以外の要求は受け付けない */
   if ( (on_off == ON) || (on_off == OFF) )
   {
      Aud_adjust_mute_info( ModuleID, on_off );
   }
}

/******************************************************************************
   関数名      ：   Aud_set_beep
   引数      ：   BYTE   req:   CAUD_REQ_BEEP_LONGKEY(長押しBEEP)
                           CAUD_REQ_BEEP_ALARM(アラームBEEP)
                           CAUD_REQ_BEEP_MULTIPLE(連続BEEP)
   戻り値      ：   なし
   機能概略   ：   ブザー出力を要求する関数。
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      2012/07/13   leejh      新規作成
******************************************************************************/
void Aud_set_beep( BYTE req )
{
   Aud_req_beep ( req );
}

/******************************************************************************
   関数名      ：   Aud_cancel_beep
   引数      ：   なし
   戻り値      ：   なし
   機能概略   ：   ブザー中断を要求する関数。
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      2012/07/13   leejh      新規作成
******************************************************************************/
void Aud_cancel_beep(void)
{
   Aud_set_stop_beep();
}

/******************************************************************************
   関数名      ：   Aud_cancel_beep
   引数      ：   なし
   戻り値      ：   BYTE   CAUD_BEEP_STA_OFF      : OFF
                     CAUD_BEEP_STA_LONGKEY   : キー長押し
                     CAUD_BEEP_STA_ALARM      : アラーム
                     CAUD_BEEP_STA_MULTIPLE   : 連続
   機能概略   ：   ブザータイプを取得する関数。
               ブザー停止状態の場合、CAUD_BEEP_STA_OFFを戻す
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      2012/07/13   leejh      新規作成
******************************************************************************/
BYTE Aud_get_beep_type( void )
{
   BYTE ret;
   
   ret = Aud_get_beep_info();
   
   return ( ret );
}

/******************************************************************************
   関数名      ：   Aud_event_1ms
   引数      ：   なし
   戻り値      ：   なし
   機能概略   ：   1ms周期タイマ処理
------------------------------------------------------------------------------
   修正履歴
    番号      日付         担当者      修正内容
   【000】      12/07/13      leejh      新規作成
******************************************************************************/
void Aud_event_1ms( void )
{
   Aud_msg_timer( CAUD_EVT_TIMER_001M );
}

/******************************************************************************
   関数名      ：   Aud_event_10ms
   引数      ：   なし
   戻り値      ：   なし
   機能概略   ：   5ms周期タイマ処理
------------------------------------------------------------------------------
   修正履歴
    番号      日付         担当者      修正内容
   【000】      06/03/21   ISHIHARA               新規作成
******************************************************************************/
void Aud_event_5ms( void )
{
   Aud_msg_timer( CAUD_EVT_TIMER_005M );
}

/******************************************************************************
   関数名      ：   Aud_event_10ms
   引数      ：   なし
   戻り値      ：   なし
   機能概略   ：   10ms周期タイマ処理
------------------------------------------------------------------------------
   修正履歴
    番号      日付         担当者      修正内容
   【000】      06/03/21   ISHIHARA               新規作成
******************************************************************************/
void Aud_event_10ms( void )
{
   Aud_msg_timer( CAUD_EVT_TIMER_010M );
}

/******************************************************************************
   関数名      ：Aud_incr
   引数      ：BYTE cntr      :インクリメントするカウンタ
            ：BYTE limit   :カウンタのリミット
   戻り値      ：無し
   機能概略   ：カウンタインクリメント処理
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/04/05   ISHIHARA   新規作成
******************************************************************************/
BYTE Aud_incr( BYTE cntr, BYTE limit )
{
   if ( ++cntr > limit )
   {
      cntr = limit;
   }
   return( cntr );
}

/******************************************************************************
   関数名      ：Aud_decr
   引数      ：BYTE cntr      :デクリメントするカウンタ
            ：BYTE limit   :カウンタのリミット
   戻り値      ：無し
   機能概略   ：カウンタデクリメント処理
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/04/07   ISHIHARA   新規作成
******************************************************************************/
BYTE Aud_decr( BYTE cntr, BYTE limit )
{
   if ( cntr > limit )
   {
      cntr--;
   }
   return( cntr );
}

/******************************************************************************
   関数名      ：Aud_add
   引数      ：BYTE src      :加算される値
            ：BYTE des      :加算する値
            ：BYTE limit   :リミット
   戻り値      ：無し
   機能概略   ：任意の値を加算する処理（加算結果が255以下のみ対象）
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/04/05   ISHIHARA   新規作成
******************************************************************************/
BYTE Aud_add( BYTE src, BYTE des, BYTE limit )
{
   if ( (src += des) > limit )
   {
      src = limit;
   }
   return( src );
}

/******************************************************************************
   関数名      ：Aud_sub
   引数      ：BYTE src      :被減算値
            ：BYTE des      :減算値
   戻り値      ：無し
   機能概略   ：任意の値を減算する処理
            ：（減算値が被減算値より大きい場合、結果は"0"になる）
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      06/04/05   ISHIHARA   新規作成
******************************************************************************/
BYTE Aud_sub( BYTE src, BYTE des )
{
   if ( src <= des )
   {
      src =0;
   }
   else
   {
      src -= des;
   }
   return( src );
}

/******************************************************************************
   関数名      ：Aud_get_mute_status
   引数      ：無し
   戻り値      ：   CAUD_MUTE_ON_END =>MUTE ON処理完了
               CAUD_MUTE_OFF_END =>MUTE OFF処理完了
               CAUD_MUTE_ON_BUSY =>MUTE ON処理中
               CAUD_MUTE_OFF_BUSY =>MUTE OFF処理中
   機能概略   ：
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      12/07/13   lirongjun   新規作成
******************************************************************************/
BYTE Aud_get_mute_status(void)
{
   BYTE mute_status;
   
   mute_status = Aud_mute_status();
   
   return( mute_status );
}

/******************************************************************************
   関数名      ：   Aud_get_power_status
   引数      ：   なし
   戻り値      ：   BYTE   CAUD_PWR_OFF   : Power Off
                     CAUD_PWR_ONSEQ   : Power On Seq
                     CAUD_PWR_ON      : Power On
                     CAUD_PWR_OFFSEQ   : Power Off Seq
   機能概略   ：   Audio Power状態を取得する
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      2012/09/25   leejh      新規作成
******************************************************************************/
BYTE Aud_get_power_status( void )
{
   BYTE power_mode;
   
   power_mode = Aud_get_power_mode();
   
   return ( power_mode );
}

#if _TEST_MODE_
/******************************************************************************
   関数名      ：   Aud_test_func
   引数      ：   BYTE RcvCmd      => 受信コマンド
               BYTE *RcvBuf   => 受信バッファ
               BYTE Length      => 受信長さ
   戻り値      ：   なし
   機能概略   ：   Audioテスト実行
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      2012/09/25   leejh      新規作成
******************************************************************************/
void Aud_test_func( BYTE RcvCmd, BYTE *RcvBuf,BYTE Length )
{
   /* コマンド発行 */
   Aud_test_edit_data( RcvCmd, RcvBuf, Length );
}

/******************************************************************************
   関数名      ：   Aud_secret_loud_key
   引数      ：   なし
   戻り値      ：   なし
   機能概略   ：   Audio Loud隠しキー処理
------------------------------------------------------------------------------
   修正履歴
    番号      日付      担当者      修正内容
   【000】      2012/09/25   leejh      新規作成
******************************************************************************/
void Aud_secret_loud_key( void )
{
   /* Loud Off 処理 */
   Aud_secret_loud_off();
}
#endif
#undef _AUD_EXT_C_
